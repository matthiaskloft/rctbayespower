<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Power Grid Analysis for Bayesian RCTs — power_grid_analysis • rctbayespower</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Power Grid Analysis for Bayesian RCTs — power_grid_analysis"><meta name="description" content="Comprehensive analysis varying both sample sizes and effect sizes, with optional
design prior for integrated power computation. This function provides flexible
power analysis across multiple scenarios and can compute weighted average
power using user-specified prior distributions."><meta property="og:description" content="Comprehensive analysis varying both sample sizes and effect sizes, with optional
design prior for integrated power computation. This function provides flexible
power analysis across multiple scenarios and can compute weighted average
power using user-specified prior distributions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rctbayespower</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01-introduction.html">Getting Started with rctbayespower: Bayesian Power Analysis for RCTs</a></li>
    <li><a class="dropdown-item" href="../articles/03-algorithm-performance.html">Getting Started with rctbayespower: Bayesian Power Analysis for RCTs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Power Grid Analysis for Bayesian RCTs</h1>

      <div class="d-none name"><code>power_grid_analysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Comprehensive analysis varying both sample sizes and effect sizes, with optional
design prior for integrated power computation. This function provides flexible
power analysis across multiple scenarios and can compute weighted average
power using user-specified prior distributions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">power_grid_analysis</span><span class="op">(</span></span>
<span>  target_power_success <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  target_power_futility <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  <span class="va">sample_sizes</span>,</span>
<span>  <span class="va">effect_sizes</span>,</span>
<span>  <span class="va">threshold_success</span>,</span>
<span>  <span class="va">threshold_futility</span>,</span>
<span>  design_prior <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  percent_group_treat <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  power_analysis_fn <span class="op">=</span> <span class="st">"power_analysis"</span>,</span>
<span>  n_simulations <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-target-power-success">target_power_success<a class="anchor" aria-label="anchor" href="#arg-target-power-success"></a></dt>
<dd><p>Desired power level for success decisions (default: 0.9)</p></dd>


<dt id="arg-target-power-futility">target_power_futility<a class="anchor" aria-label="anchor" href="#arg-target-power-futility"></a></dt>
<dd><p>Desired power level for futility decisions (default: 0.95)</p></dd>


<dt id="arg-sample-sizes">sample_sizes<a class="anchor" aria-label="anchor" href="#arg-sample-sizes"></a></dt>
<dd><p>Vector of total sample sizes to test</p></dd>


<dt id="arg-effect-sizes">effect_sizes<a class="anchor" aria-label="anchor" href="#arg-effect-sizes"></a></dt>
<dd><p>Vector of effect sizes to test</p></dd>


<dt id="arg-threshold-success">threshold_success<a class="anchor" aria-label="anchor" href="#arg-threshold-success"></a></dt>
<dd><p>Upper threshold for success determination (required)</p></dd>


<dt id="arg-threshold-futility">threshold_futility<a class="anchor" aria-label="anchor" href="#arg-threshold-futility"></a></dt>
<dd><p>Lower threshold for futility determination (required)</p></dd>


<dt id="arg-design-prior">design_prior<a class="anchor" aria-label="anchor" href="#arg-design-prior"></a></dt>
<dd><p>Optional design prior for the effect size for integrated power. Can be:</p><ul><li><p>A string in brms prior syntax (e.g., "normal(0.3, 0.1)", "student_t(6, 0.5, 0.2)", "gamma(2, 3)", "beta(2, 5)", "exponential(1)", "uniform(0, 1)", etc.). Any distribution supported by brms with a corresponding density function is supported.</p></li>
<li><p>An R function taking effect size as input (e.g., function(x) dnorm(x, 0.5, 0.2))</p></li>
<li><p>NULL for no design prior (default)</p></li>
</ul></dd>


<dt id="arg-percent-group-treat">percent_group_treat<a class="anchor" aria-label="anchor" href="#arg-percent-group-treat"></a></dt>
<dd><p>Percentage of total sample allocated to treatment group (default: .5)</p></dd>


<dt id="arg-power-analysis-fn">power_analysis_fn<a class="anchor" aria-label="anchor" href="#arg-power-analysis-fn"></a></dt>
<dd><p>Power analysis function to use. Either "power_analysis" for custom models or "power_analysis_ancova" for ANCOVA wrapper (default: "power_analysis")</p></dd>


<dt id="arg-n-simulations">n_simulations<a class="anchor" aria-label="anchor" href="#arg-n-simulations"></a></dt>
<dd><p>Number of simulations per combination (default: 500)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>All arguments required by the chosen power analysis function (except n_control, n_treatment, effect_size, threshold_success, and threshold_futility which are handled automatically)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class "rctbayespower_grid" containing:</p><ul><li><p>target_power_success: Desired success power level</p></li>
<li><p>target_power_futility: Desired futility power level</p></li>
<li><p>threshold_success: Success threshold used in analysis</p></li>
<li><p>threshold_futility: Futility threshold used in analysis</p></li>
<li><p>sample_sizes: Vector of tested sample sizes</p></li>
<li><p>effect_sizes: Vector of tested effect sizes</p></li>
<li><p>design_prior: Design prior specification</p></li>
<li><p>power_surface: Data frame with power results for all combinations, including Monte Carlo Standard Errors (MCSE) for all power and probability metrics</p></li>
<li><p>integrated_power: If design prior provided, integrated power and probability across effect sizes, including MCSE for integrated metrics</p></li>
<li><p>optimal_combinations: Sample size/effect size combinations achieving target power</p></li>
<li><p>detailed_results: Full power analysis results for each combination</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function runs power analyses across all combinations of sample_sizes and effect_sizes.
When design_prior is provided, it computes integrated power by weighting each effect size
according to the specified design prior distribution.</p>
<p>The design prior can be specified in two ways:</p><ul><li><p><strong>brms syntax</strong>: String expressions like "normal(0.5, 0.2)" or "student_t(6, 0.3, 0.1)"</p></li>
<li><p><strong>R function</strong>: User-defined function, e.g., function(x) dnorm(x, 0.5, 0.2)</p></li>
</ul><p>For custom power analysis (power_analysis_fn = "power_analysis"), you must provide:
simulate_data_fn, model_formula_true_params, model_formula_estimation, family,
priors_true_params, priors_estimation, target_param</p>
<p>For ANCOVA power analysis (power_analysis_fn = "power_analysis_ancova"), you must provide:
outcome_type, baseline_effect</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># \donttest{</span></span>
<span><span class="co"># Basic analysis across sample sizes and effect sizes</span></span>
<span><span class="va">grid_result</span> <span class="op">&lt;-</span> <span class="fu">power_grid_analysis</span><span class="op">(</span></span>
<span>  target_power_success <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  sample_sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>,</span>
<span>  effect_sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>  threshold_success <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  threshold_futility <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  power_analysis_fn <span class="op">=</span> <span class="st">"power_analysis_ancova"</span>,</span>
<span>  outcome_type <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  baseline_effect <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  n_simulations <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  brms_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>algorithm <span class="op">=</span> <span class="st">"meanfield"</span><span class="op">)</span>, <span class="co"># fast algorithm for testing</span></span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress_updates <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># }</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthias Kloft.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

