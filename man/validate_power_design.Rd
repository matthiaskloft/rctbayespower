% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/power_analysis.R
\name{validate_power_design}
\alias{validate_power_design}
\title{Validate Power Analysis Design}
\usage{
validate_power_design(
  n_control,
  n_treatment,
  simulate_data_fn,
  model_formula_true_params,
  model_formula_estimation,
  family,
  priors_true_params,
  priors_estimation,
  target_param,
  brms_args = list(algorithm = "sampling", iter = 1500, warmup = 500, chains = 2, cores =
    1, init = 0.1, control = list(adapt_delta = 0.9))
)
}
\arguments{
\item{n_control}{Number of participants in control group}

\item{n_treatment}{Number of participants in treatment group}

\item{simulate_data_fn}{User-defined function that takes (n_control, n_treatment) and returns a data frame}

\item{model_formula_true_params}{brms formula object for design model with true parameters}

\item{model_formula_estimation}{brms formula object for estimation model}

\item{family}{Distributional family for brms}

\item{priors_true_params}{Priors with true parameter values (as constants) for design model}

\item{priors_estimation}{Priors for estimation in power simulation}

\item{target_param}{Name of the parameter to track for power calculation (without "b_" prefix)}

\item{brms_args}{Arguments passed to brms for validation runs. Default includes algorithm="sampling", iter=700, warmup=200, chains=2, cores=1. User can override any of these or add additional arguments.}
}
\value{
A list containing validation results, model summaries, and compiled design models (brms_design_true_params and brms_design_estimation) that can be reused in power_analysis()
}
\description{
Helper function to validate the design components before running a full power analysis.
Performs a single simulation run and checks for convergence and parameter extraction.
}
\examples{
\dontrun{
# Validate design before running full power analysis
validation <- validate_power_design(
  n_control = 50, 
  n_treatment = 50,
  simulate_data_fn = simulate_data,
  model_formula_true_params = model_formula_true,
  model_formula_estimation = model_formula_est,
  family = gaussian(),
  priors_true_params = priors_true,
  priors_estimation = priors_est,
  target_param = "grouptreat"
)

# Use the compiled models from validation in power analysis
power_result <- power_analysis(
  n_control = 50, 
  n_treatment = 50,
  simulate_data_fn = simulate_data,
  target_param = "grouptreat",
  threshold_success = 0.2,
  threshold_futility = 0,
  p_sig_success = 0.95,
  p_sig_futility = 0.5,
  n_simulations = 2,
  brms_design_true_params = validation$brms_design_true_params,
  brms_design_estimation = validation$brms_design_estimation
  brms_args = list(algorithm = "meanfield"),
  n_cores = 1,
  progress_updates = 5
)
}
}
