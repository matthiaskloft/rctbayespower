% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_power_grid_analysis.R
\name{plot.rctbayespower_sim_result}
\alias{plot.rctbayespower_sim_result}
\title{Plot Power Analysis Results}
\usage{
\method{plot}{rctbayespower_sim_result}(
  x,
  type = "auto",
  metric = "both",
  values = "both",
  show_target = TRUE,
  show_integrated = TRUE,
  facet_by = "effect_size",
  design_prior = NULL,
  ...
)
}
\arguments{
\item{x}{An object of class 'rctbayespower_sim_result' returned by power_analysis()}

\item{type}{Type of plot to create:
\itemize{
\item "auto" - Automatically detect best plot type based on analysis (default)
\item "power_curve" - Power curve across single varying dimension
\item "heatmap" - 2D heatmap when both sample sizes and effect sizes vary
\item "integrated" - Integrated power results when design prior is used
\item "comparison" - Compare power vs posterior probabilities
}}

\item{metric}{Which power metric to display:
\itemize{
\item "success" - Success power and probability
\item "futility" - Futility power and probability
\item "both" - Both success and futility power and probabilities (default)
}}

\item{values}{Which values to display:
\itemize{
\item "both" - Both power and posterior probabilities (default)
\item "power" - Power only
\item "post_prob" - Posterior probabilities only
}}

\item{show_target}{Whether to show target power lines (default: TRUE)}

\item{show_integrated}{Whether to include integrated power when available (default: TRUE)}

\item{facet_by}{For power_curve plots when both sample sizes and effect sizes vary:
\itemize{
\item "effect_size" - Facet by effect size, vary sample size on x-axis (default)
\item "sample_size" - Facet by sample size, vary effect size on x-axis
}}

\item{design_prior}{Optional design prior for runtime integrated power computation. Can be:
\itemize{
\item A string in brms prior syntax (e.g., "normal(0.3, 0.1)", "student_t(6, 0.5, 0.2)")
\item An R function taking effect size as input (e.g., function(x) dnorm(x, 0.5, 0.2))
\item NULL for no runtime integration (default)
}
If provided, integrated power will be computed using this design prior instead of
any design prior specified in the original power_analysis() call.
Only valid when effect sizes vary (length > 1).}

\item{...}{Additional arguments passed to ggplot2 functions}
}
\value{
A ggplot2 object
}
\description{
Create comprehensive visualizations for power analysis results from power_analysis().
Supports different plot types based on analysis type (sample_only, effect_only, or both varying).
}
\examples{
\donttest{
# Sample size analysis plot
grid_result <- list(
  target_power_success = 0.9,
  target_power_futility = 0.95,
  threshold_success = 0.2,
  threshold_futility = 0,
  sample_sizes = c(100, 200),
  effect_sizes = 0.5,
  design_prior = NULL,
  analysis_type = "sample_only",
  power_surface = data.frame(
    n_total = c(100, 200),
    effect_size = c(0.5, 0.5),
    power_success = c(0.65, 0.85),
    power_futility = c(0.20, 0.15),
    mean_prob_success = c(0.72, 0.88),
    mean_prob_futility = c(0.25, 0.18)
  ),
  integrated_power = NULL,
  optimal_combinations = data.frame(),
  detailed_results = list()
)
class(grid_result) <- "rctbayespower_sim_result"
plot(grid_result) # Auto-detects power curve

# Effect size analysis plot
grid_result <- list(
  target_power_success = 0.9,
  target_power_futility = 0.95,
  threshold_success = 0.2,
  threshold_futility = 0,
  sample_sizes = 200,
  effect_sizes = c(0.4, 0.8),
  design_prior = NULL,
  analysis_type = "effect_only",
  power_surface = data.frame(
    n_total = c(200, 200),
    effect_size = c(0.4, 0.8),
    power_success = c(0.75, 0.92),
    power_futility = c(0.30, 0.08),
    mean_prob_success = c(0.78, 0.94),
    mean_prob_futility = c(0.32, 0.10)
  ),
  integrated_power = NULL,
  optimal_combinations = data.frame(),
  detailed_results = list()
)
class(grid_result) <- "rctbayespower_sim_result"
plot(grid_result) # Shows both success and futility, both power and probabilities

# Full heatmap
grid_result <- list(
  target_power_success = 0.9,
  target_power_futility = 0.95,
  threshold_success = 0.2,
  threshold_futility = 0,
  sample_sizes = c(100, 200),
  effect_sizes = c(0.4, 0.8),
  design_prior = NULL,
  analysis_type = "both",
  power_surface = data.frame(
    n_total = c(100, 200, 100, 200),
    effect_size = c(0.4, 0.4, 0.8, 0.8),
    power_success = c(0.60, 0.75, 0.80, 0.92),
    power_futility = c(0.35, 0.30, 0.15, 0.08),
    mean_prob_success = c(0.65, 0.78, 0.82, 0.94),
    mean_prob_futility = c(0.38, 0.32, 0.18, 0.10)
  ),
  integrated_power = NULL,
  optimal_combinations = data.frame(),
  detailed_results = list()
)
class(grid_result) <- "rctbayespower_sim_result"
plot(grid_result, type = "heatmap")

# Power curves faceted by effect size (when both vary)
plot(grid_result, type = "power_curve", facet_by = "effect_size")

# Power curves faceted by sample size (when both vary)
plot(grid_result, type = "power_curve", facet_by = "sample_size")
}
}
