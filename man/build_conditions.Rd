% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class_conditions.R
\name{build_conditions}
\alias{build_conditions}
\title{Build Conditions for Power Analysis}
\usage{
build_conditions(
  design,
  crossed = NULL,
  constant = NULL,
  target_pwr = NULL,
  condition_values = NULL,
  static_values = NULL,
  linked = NULL
)
}
\arguments{
\item{design}{An rctbp_design object that defines the study design}

\item{crossed}{A named list of parameter vectors. All combinations (Cartesian
product) will be created. Use \code{\link[=link]{link()}} to group parameters that should
co-vary instead of cross.}

\item{constant}{A named list of parameter values that remain constant across
all conditions.}

\item{target_pwr}{Target power level for identifying optimal conditions
(default NULL). If NULL, the condition with highest power is shown.
If specified (0 to 1), finds the smallest sample size achieving at
least this power when displaying results.}

\item{condition_values}{Deprecated. Use \code{crossed} instead.}

\item{static_values}{Deprecated. Use \code{constant} instead.}

\item{linked}{Deprecated. Use \code{\link[=link]{link()}} inside \code{crossed} instead.}
}
\value{
An S7 object of class "rctbp_conditions" containing:
\item{grid}{A data.frame with all parameter combinations}
\item{params_by_cond}{A list of argument lists for each condition,
separated into simulation and decision arguments}
\item{design}{The original rctbp_design object}
\item{crossed}{The original crossed specification (may contain link() groups)}
\item{constant}{Constant parameters across all conditions}
\item{target_pwr}{Target power level for optimal condition identification}
}
\description{
Creates a structured set of conditions and argument lists for power analysis
simulations. Parameters are organized into two categories: \code{crossed} (varying)
and \code{constant} (fixed). Use \code{\link[=link]{link()}} within \code{crossed} to make parameters
co-vary 1-to-1 instead of forming a Cartesian product.
}
\details{
\strong{Parameter Categories:}
\itemize{
\item \code{crossed}: Cartesian product - all combinations created
\item \code{link()}: Within crossed, marks params to co-vary (1-to-1)
\item \code{constant}: Same value for all conditions
}

\strong{Example with linked parameters:}
\preformatted{
crossed = list(
  link(
    n_total = c(80, 160),
    analysis_at = list(c(40, 80), c(80, 160))
  ),
  b_arm_treat = c(0, 0.3)
)
}
Here, \code{n_total} and \code{analysis_at} co-vary (80 with c(40,80), 160 with c(80,160)),
and both are crossed with \code{b_arm_treat}, creating 4 conditions.
}
\examples{
\dontrun{
# Simple example without link()
conditions <- build_conditions(
  design = my_design,
  crossed = list(n_total = c(100, 200), b_arm_treat = c(0.3, 0.5)),
  constant = list(
    thr_dec_eff = 0.975, thr_dec_fut = 0.5,
    thr_fx_eff = 0.2, thr_fx_fut = 0
  )
)

# With link() for co-varying parameters
conditions <- build_conditions(
  design = my_design,
  crossed = list(
    link(n_total = c(80, 160), analysis_at = list(c(40,80), c(80,160))),
    b_arm_treat = c(0, 0.3)
  ),
  constant = list(thr_dec_eff = 0.975, thr_dec_fut = 0.5)
)
}

}
