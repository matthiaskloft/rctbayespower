% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/backend_bf.R
\name{estimate_batch_bf}
\alias{estimate_batch_bf}
\title{Estimate Posterior Using BayesFlow (Batch)}
\usage{
estimate_batch_bf(data_batch, bf_model, backend_args, target_params)
}
\arguments{
\item{data_batch}{List with batched simulation data from prepare_*_bf().
Must contain: outcome (matrix), covariate (matrix), group (matrix), N (int)}

\item{bf_model}{BayesFlow/Keras model (Python object via reticulate)}

\item{backend_args}{List with n_posterior_samples (default 1000), etc.}

\item{target_params}{Character vector of parameter names (first used for single-param models)}
}
\value{
Matrix of posterior draws (batch_size x n_posterior_samples).
For multi-parameter models, only the first target parameter is returned.
}
\description{
Processes a batch of simulations through BayesFlow in a single forward pass.
This is the core function for neural posterior estimation.
}
\details{
Supports multiple BayesFlow model types:
\itemize{
\item BasicWorkflow: Uses workflow.sample(conditions=dict, num_samples=int)
\item Approximator: Uses approximator.sample(data=dict, num_samples=int)
\item Raw Keras: Uses model.predict() + Gaussian sampling
}

Mock Mode: Set environment variable RCTBP_MOCK_BF=TRUE to use mock samples
instead of actual BayesFlow inference. Useful for testing R infrastructure.
}
\keyword{internal}
